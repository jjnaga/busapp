<!-- Outer container pinned to bottom -->
<div class="absolute bottom-0 w-full" [ngClass]="isExpanded ? 'h-[50%]' : 'h-[20%]'">
  <!-- Drawer body -->
  <div class="bg-white shadow-xl relative w-full h-full flex flex-col overflow-hidden">

    <!-- Loading Indicator -->
    <div *ngIf="loading$ | async" class="text-center py-4">
      <p>Loading vehicles...</p>
    </div>

    <!-- Content (only show when data is available) -->
    <div *ngIf="!(loading$ | async)">
      <!-- The "peeking" area: first 3 favorites or incoming items -->
      <div class="p-3 bg-gray-100 flex-none">
        <h3 class="text-lg font-bold">Next 3 Buses</h3>
        <ul>
          <li *ngFor="let bus of vehicles$ | async | slice:0:3" class="py-1">
            {{ bus.busNumber }} - {{ bus.routeName }}
          </li>
        </ul>
      </div>

      <!-- The expanded list (revealed only if isExpanded) -->
      <div class="flex-auto overflow-y-auto px-3 pt-2" *ngIf="isExpanded">
        <h4 class="text-md font-semibold mb-2">All Favorites</h4>
        <ul>
          <li *ngFor="let bus of vehicles$ | async" class="py-1 border-b last:border-none">
            {{ bus.busNumber }} - {{ bus.routeName }}
          </li>
        </ul>
      </div>
    </div>

    <!-- Bottom Menu (like old-school 5 icon iPhone tabs, updated to 2025 or something) -->
    <bottom-menu class="flex-none"></bottom-menu>

    <!-- Drawer handle or toggle button -->
    <button class="absolute top-0 right-0 m-2 px-4 py-2 bg-blue-500 text-white rounded" (click)="toggleDrawer()">
      {{ isExpanded ? 'Close' : 'Open' }}
    </button>
  </div>
</div>